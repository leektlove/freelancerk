<!DOCTYPE html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" 
				xmlns:th="http://www.thymeleaf.org"
				xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
 				layout:decorator="layout/layoutf">
<head>
	<!-- ë¡œì»¬ì ìš© css -->
	<link rel="stylesheet" href="/static/css/audition/auditionDetail.css">
</head>

	
	<section id="content" layout:fragment="content">

		<div class="container auditionDetailContainer" >
		 	<input type="hidden" name="uid" th:if="${user}" th:value="${user.uid}" id="uid">
	        <div class="row">
	            <div class="col-lg-8 col-md-12 text-center col-sm-12 auditionImgMobile">
	                <img src="../img/tumblr_e1ad3902a658bd6b6549bda049025d93_b430fb61_640.jpg" alt="" class="rounded auditionDetailThumnailImg" th:src="${audition.imageUrl}">
	            </div>
	            <div class="col-12 col-lg-4 col-md-12 auditionInfoPc">
	                <div class="auditionInfoBox">
	                   <div class="auditionInfoTopName" th:text="${audition.name}">
	                       ë‚˜ì˜ í•´ë°©ì¼ì§€ ì¡°ì—° ì˜¤ë””ì…˜
	                   </div>
	                    <table class="goodsTopInfoTable ">
							<tbody>
	                            <tr>
	                                <th>ì œëª©</th>
	                                <td th:text="${audition.product}">ë‚˜ì˜ í•´ë°©ì¼ì§€ </td>	
	                            </tr>
	                            <tr>
	                                <th>ì‹œê°„</th>
	                                <td  th:text="|${#strings.substring(audition.auditionAt,0, 10)} ${#strings.substring(audition.auditionAt,11, 16)}|">2022-04-12 13:23:32</td>	
	                            </tr>
	                            <tr>
	                                <th>ì¥ì†Œ</th>
	                                <td th:text="${audition.adress}">ì„œìš¸íŠ¹ë³„ì‹œ ê´‘ì§„êµ¬ ì•„ì°¨ì‚°ë¡œ 39ê°€ê¸¸ 23</td>	
	                            </tr>
						   </tbody>
	                   </table>
	                </div>
	                <div class="auditionApply auditionApplyBtn auditionApplyBtnClick" th:workid="${audition.auditionId}" th:if="${!apply}">
	                    ì˜¤ë””ì…˜ ì§€ì›í•˜ê¸°
	                </div>
	                <div class="auditionApply auditionApplyBtn auditionApplyBtnNone" th:workid="${audition.auditionId}" th:if="${apply}">
	                    ì§€ì›ì™„ë£Œ
	                </div>
	            </div>
	            <div class="col-12 goodsTopInfo">
	                <div class="goodsTopTitle"  th:text="${audition.name}" >ğŸŒœ ìƒˆë²½ ìš”ê°€ &amp;ëª¨ë‹ ìš”ê°€ ğŸŒ</div>
	                <div class="goodsTopSub">
	                    <div class="goodsTopInfoTableDiv">
	                        <table class="goodsTopInfoTable ">
	                            <tbody> 
	                                <tr>
	                                    <th>ì œëª©</th>
	                                    <td th:text="${audition.product}">ë‚˜ì˜ í•´ë°©ì¼ì§€ </td>	
	                                </tr>
	                                <tr>
	                                    <th>ì‹œê°„</th>
                                    	<td th:text="|${#strings.substring(audition.auditionAt,0, 10)} ${#strings.substring(audition.auditionAt,11, 16)}|">2022-04-12 13:23:32</td>
	                                </tr>
	                                <tr>
	                                    <th>ì¥ì†Œ</th>
	                                    <td th:text="${audition.adress}">ì„œìš¸íŠ¹ë³„ì‹œ ê´‘ì§„êµ¬ ì•„ì°¨ì‚°ë¡œ 39ê°€ê¸¸ 23</td>	
	                                </tr>
	                           </tbody>
	                       </table>
	
	                    </div>
				    </div>
			    </div>
	            <div class="goodsTopButtonDiv"> <!--ì¢‹ì•„ìš”, ê³µìœ í•˜ê¸° ë²„íŠ¼ë°•ìŠ¤-->
	               <div class="auditionApplyMobile auditionApplyBtn auditionApplyBtnClick"  th:workid="${audition.auditionId}"  th:if="${!apply}">
	                    ì˜¤ë””ì…˜ ì§€ì›í•˜ê¸°
	                </div>
	                <div class="auditionApplyMobile auditionApplyBtn auditionApplyBtnNone"  th:workid="${audition.auditionId}" th:if="${apply}">
	                    ì§€ì›ì™„ë£Œ
	                </div>
	            </div>
	            <div class="goodsDivision1"> </div>
	        </div>
	        <hr class="hrPc">
	        <div class="row auditionText">
	            <div class="goodsContentsDescription" style="min-height:500px; max-height: 999999px;" th:utext="${audition.text}">
	        
	           	</div>
	        </div>
	    </div>
	    <script>
		    $(document).on('click', '.auditionApplyBtnClick', function(e){
				if (!confirm("í•´ë‹¹ ì˜¤ë””ì…˜ì— ì§€ì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
				
	      	  	} else {
	            	var work = $(this).attr('workid');
					console.log("ajaxApplyAudition: "+work);
					//var loggedIn = '${loggedIn}';
					var uid = $('#uid').val();
					if(uid){
						console.log(uid);
						var param = {};
					    param.uid = uid;
					    param.work = work;
					    
					    param = JSON.stringify(param);
					    
						$.ajax({
					        url : "/ajax_audition_apply",
					        data : param,
					        type : 'post',
					        contentType:"application/json; charset=UTF-8",
					        dataType:"json",
					        success : function(data){
					           if(data.status!="200"){
						 			alert(data.errorMsg);
								}else{
									alert("ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
									location.reload();
								}
					        },
					        error : function(request,status,error){
					        	alert("ì‹ ì²­ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ê³„ì† í•´ë‹¹ë¬¸ì œê°€ ë°œìƒì‹œ ê³ ê°ì„¼í„°ì— ë¬¸ì˜í•´ì£¼ì„¸ìš”");
					        }
					    });
					}else{
						alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”');
					}
				}
			});
		</script> 	 
	    
	</section>
	

</html>